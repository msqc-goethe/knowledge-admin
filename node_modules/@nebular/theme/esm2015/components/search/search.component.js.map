{"version":3,"file":"search.component.js","sourceRoot":"","sources":["../../../../../../.ng_build/theme/components/search/search.component.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH,OAAO,EAEL,uBAAuB,EACvB,iBAAiB,EACjB,SAAS,EACT,UAAU,EACV,YAAY,EACZ,WAAW,EACX,KAAK,EAIL,MAAM,EAEN,SAAS,GACV,MAAM,eAAe,CAAC;AACvB,OAAO,EAAE,aAAa,EAAE,MAAM,EAAE,MAAM,iBAAiB,CAAC;AAExD,OAAO,EAAE,EAAE,IAAI,YAAY,EAAE,OAAO,EAAE,MAAM,MAAM,CAAC;AACnD,OAAO,EAAE,MAAM,EAAE,KAAK,EAAE,SAAS,EAAE,MAAM,gBAAgB,CAAC;AAE1D,OAAO,EAAE,eAAe,EAAE,MAAM,kBAAkB,CAAC;AACnD,OAAO,EAAE,cAAc,EAAE,MAAM,8BAA8B,CAAC;AAC9D,OAAO,EAAE,gBAAgB,EAAE,MAAM,gCAAgC,CAAC;AAClE,OAAO,EAAgB,iBAAiB,EAAE,MAAM,wBAAwB,CAAC;AAEzE;;;GAGG;AAmCH,MAAM,OAAO,sBAAsB;IAlCnC;QA+CW,SAAI,GAAG,KAAK,CAAC;QAEZ,UAAK,GAAG,IAAI,YAAY,EAAE,CAAC;QAC3B,WAAM,GAAG,IAAI,YAAY,EAAE,CAAC;QAC5B,gBAAW,GAAG,IAAI,YAAY,EAAE,CAAC;IA4E7C,CAAC;IAxEC,IACI,SAAS;QACX,OAAO,IAAI,CAAC,IAAI,CAAC;IACnB,CAAC;IAED,IACI,WAAW;QACb,OAAO,IAAI,CAAC,IAAI,KAAK,sBAAsB,CAAC,iBAAiB,CAAC;IAChE,CAAC;IAED,IACI,YAAY;QACd,OAAO,IAAI,CAAC,IAAI,KAAK,sBAAsB,CAAC,kBAAkB,CAAC;IACjE,CAAC;IAED,IACI,SAAS;QACX,OAAO,IAAI,CAAC,IAAI,KAAK,sBAAsB,CAAC,eAAe,CAAC;IAC9D,CAAC;IAED,IACI,OAAO;QACT,OAAO,IAAI,CAAC,IAAI,KAAK,sBAAsB,CAAC,YAAY,CAAC;IAC3D,CAAC;IAED,IACI,aAAa;QACf,OAAO,IAAI,CAAC,IAAI,KAAK,sBAAsB,CAAC,mBAAmB,CAAC;IAClE,CAAC;IAED,IACI,SAAS;QACX,OAAO,IAAI,CAAC,IAAI,KAAK,sBAAsB,CAAC,eAAe,CAAC;IAC9D,CAAC;IAED,IACI,SAAS;QACX,OAAO,IAAI,CAAC,IAAI,KAAK,sBAAsB,CAAC,eAAe,CAAC;IAC9D,CAAC;IAED,WAAW,CAAC,EAAE,IAAI,EAAiB;QACjC,MAAM,YAAY,GAAG,CAAC,IAAI,CAAC,aAAa,EAAE,IAAI,IAAI,CAAC,YAAY,KAAK,KAAK,CAAC;QAC1E,IAAI,YAAY,IAAI,IAAI,CAAC,YAAY,EAAE;YACrC,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC,KAAK,GAAG,EAAE,CAAC;SAC5C;QAED,IAAI,CAAC,UAAU,EAAE,CAAC;IACpB,CAAC;IAED,eAAe;QACb,IAAI,CAAC,UAAU,EAAE,CAAC;IACpB,CAAC;IAED,SAAS;QACP,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;IACpB,CAAC;IAED,YAAY,CAAC,IAAI;QACf,IAAI,IAAI,EAAE;YACR,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SACxB;IACH,CAAC;IAED,eAAe,CAAC,IAAY;QAC1B,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC9B,CAAC;IAED,UAAU;QACR,IAAI,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,YAAY,EAAE;YAClC,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC,KAAK,EAAE,CAAC;SACzC;IACH,CAAC;;AA1Fe,wCAAiB,GAAG,cAAc,CAAC;AACnC,yCAAkB,GAAG,eAAe,CAAC;AACrC,sCAAe,GAAG,YAAY,CAAC;AAC/B,mCAAY,GAAG,SAAS,CAAC;AACzB,0CAAmB,GAAG,gBAAgB,CAAC;AACvC,sCAAe,GAAG,YAAY,CAAC;AAC/B,sCAAe,GAAG,YAAY,CAAC;;YA1ChD,SAAS,SAAC;gBACT,QAAQ,EAAE,iBAAiB;gBAC3B,eAAe,EAAE,uBAAuB,CAAC,MAAM;gBAU/C,QAAQ,EAAE;;;;;;;;;;;;;;;;;;;;GAoBT;;aACF;;;mBAWE,KAAK;0BACL,KAAK;mBACL,KAAK;mBACL,KAAK;oBAEL,MAAM;qBACN,MAAM;0BACN,MAAM;2BAEN,SAAS,SAAC,aAAa;wBAEvB,WAAW,SAAC,YAAY;0BAKxB,WAAW,SAAC,oBAAoB;2BAKhC,WAAW,SAAC,qBAAqB;wBAKjC,WAAW,SAAC,kBAAkB;sBAK9B,WAAW,SAAC,eAAe;4BAK3B,WAAW,SAAC,sBAAsB;wBAKlC,WAAW,SAAC,kBAAkB;wBAK9B,WAAW,SAAC,kBAAkB;;AA0CjC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GAiDG;AAqBH,MAAM,OAAO,iBAAiB;IAqC5B,YACU,aAA8B,EAC9B,YAA4B,EAC5B,MAAc,EACd,cAAgC,EAChC,cAAiC;QAJjC,kBAAa,GAAb,aAAa,CAAiB;QAC9B,iBAAY,GAAZ,YAAY,CAAgB;QAC5B,WAAM,GAAN,MAAM,CAAQ;QACd,mBAAc,GAAd,cAAc,CAAkB;QAChC,mBAAc,GAAd,cAAc,CAAmB;QAxCnC,aAAQ,GAAG,IAAI,OAAO,EAAQ,CAAC;QAEvC,oBAAe,GAAG,KAAK,CAAC;QAUxB;;;WAGG;QACM,gBAAW,GAAW,WAAW,CAAC;QAE3C;;;;WAIG;QACM,SAAI,GAAW,qBAAqB,CAAC;IAkB3C,CAAC;IAEJ,QAAQ;QACN,IAAI,CAAC,MAAM,CAAC,MAAM;aACf,IAAI,CACH,MAAM,CAAC,KAAK,CAAC,EAAE,CAAC,KAAK,YAAY,aAAa,CAAC,EAC/C,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,CACzB;aACA,SAAS,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC;QAEtC,IAAI,CAAC,aAAa,CAAC,gBAAgB,EAAE;aAClC,IAAI,CACH,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,IAAI,IAAI,CAAC,GAAG,KAAK,IAAI,CAAC,GAAG,CAAC,EAClD,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,CACzB;aACA,SAAS,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC;QAEtC,IAAI,CAAC,aAAa,CAAC,kBAAkB,EAAE;aACpC,IAAI,CACH,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,IAAI,IAAI,CAAC,GAAG,KAAK,IAAI,CAAC,GAAG,CAAC,EAClD,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,CACzB;aACA,SAAS,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC;IACxC,CAAC;IAED,WAAW;QACT,IAAI,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,UAAU,CAAC,WAAW,EAAE,EAAE;YACpD,IAAI,CAAC,mBAAmB,EAAE,CAAC;YAC3B,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC;SAC1B;QAED,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;QACrB,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC;IAC3B,CAAC;IAED,UAAU;QACR,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;YACpB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,cAAc,CAAC,MAAM,EAAE,CAAC;YAC/C,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;SAChD;QAED,IAAI,CAAC,YAAY,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC/C,YAAY,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,GAAG,EAAE;YAC/C,IAAI,CAAC,YAAY,CAAC,iBAAiB,CAAC,aAAa,CAAC,CAAC;YACnD,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;YAC5B,IAAI,CAAC,cAAc,CAAC,aAAa,EAAE,CAAC;QACtC,CAAC,CAAC,CAAC;IACL,CAAC;IAED,UAAU;QACR,IAAI,CAAC,mBAAmB,EAAE,CAAC;QAC3B,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;QAC7B,IAAI,CAAC,cAAc,CAAC,aAAa,EAAE,CAAC;QACpC,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC,KAAK,EAAE,CAAC;IAC1C,CAAC;IAED,MAAM,CAAC,IAAI;QACT,IAAI,CAAC,aAAa,CAAC,YAAY,CAAC,IAAI,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC;QAChD,IAAI,CAAC,UAAU,EAAE,CAAC;IACpB,CAAC;IAED,SAAS,CAAC,IAAY;QACpB,IAAI,CAAC,aAAa,CAAC,WAAW,CAAC,IAAI,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC;IACjD,CAAC;IAED,YAAY;QACV,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC;IACzD,CAAC;IAED,cAAc;QACZ,IAAI,CAAC,aAAa,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC;IAC3D,CAAC;IAEO,mBAAmB;QACzB,IAAI,CAAC,YAAY,CAAC,iBAAiB,CAAC,aAAa,CAAC,CAAC;QACnD,YAAY,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,SAAS,CAAC,GAAG,EAAE;YACjD,IAAI,CAAC,YAAY,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACjD,CAAC,CAAC,CAAC;IACL,CAAC;;;YA7IF,SAAS,SAAC;gBACT,QAAQ,EAAE,WAAW;gBACrB,eAAe,EAAE,uBAAuB,CAAC,MAAM;gBAE/C,QAAQ,EAAE;;;;;;;;;;;;;;GAcT;;aACF;;;YAlNQ,eAAe;YACf,cAAc;YANC,MAAM;YAOrB,gBAAgB;YApBvB,iBAAiB;;;kBAiPhB,KAAK;0BAML,KAAK;mBAOL,KAAK;mBAOL,KAAK;gCAEL,SAAS,SAAC,iBAAiB;2BAC3B,SAAS,SAAC,cAAc,EAAE,EAAE,IAAI,EAAE,UAAU,EAAE","sourcesContent":["/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\nimport {\n  AfterViewInit,\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  EventEmitter,\n  HostBinding,\n  Input,\n  OnChanges,\n  OnDestroy,\n  OnInit,\n  Output,\n  SimpleChanges,\n  ViewChild,\n} from '@angular/core';\nimport { NavigationEnd, Router } from '@angular/router';\n\nimport { of as observableOf, Subject } from 'rxjs';\nimport { filter, delay, takeUntil } from 'rxjs/operators';\n\nimport { NbSearchService } from './search.service';\nimport { NbThemeService } from '../../services/theme.service';\nimport { NbOverlayService } from '../cdk/overlay/overlay-service';\nimport { NbOverlayRef, NbPortalDirective } from '../cdk/overlay/mapping';\n\n/**\n * search-field-component is used under the hood by nb-search component\n * can't be used itself\n */\n@Component({\n  selector: 'nb-search-field',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  styleUrls: [\n    'styles/search.component.modal-zoomin.css',\n    'styles/search.component.layout-rotate.css',\n    'styles/search.component.modal-move.css',\n    'styles/search.component.curtain.css',\n    'styles/search.component.column-curtain.css',\n    'styles/search.component.modal-drop.css',\n    'styles/search.component.modal-half.css',\n  ],\n  template: `\n    <div class=\"search\" (keyup.esc)=\"emitClose()\">\n      <button (click)=\"emitClose()\" nbButton ghost class=\"close-button\">\n        <nb-icon icon=\"close-outline\" pack=\"nebular-essentials\"></nb-icon>\n      </button>\n      <div class=\"form-wrapper\">\n        <form class=\"form\" (keyup.enter)=\"submitSearch(searchInput.value)\">\n          <div class=\"form-content\">\n            <input class=\"search-input\"\n                   #searchInput\n                   (input)=\"emitSearchInput(searchInput.value)\"\n                   autocomplete=\"off\"\n                   [attr.placeholder]=\"placeholder\"\n                   tabindex=\"-1\"\n                   (blur)=\"focusInput()\"/>\n          </div>\n          <span class=\"info\">{{ hint }}</span>\n        </form>\n      </div>\n    </div>\n  `,\n})\nexport class NbSearchFieldComponent implements OnChanges, AfterViewInit {\n\n  static readonly TYPE_MODAL_ZOOMIN = 'modal-zoomin';\n  static readonly TYPE_ROTATE_LAYOUT = 'rotate-layout';\n  static readonly TYPE_MODAL_MOVE = 'modal-move';\n  static readonly TYPE_CURTAIN = 'curtain';\n  static readonly TYPE_COLUMN_CURTAIN = 'column-curtain';\n  static readonly TYPE_MODAL_DROP = 'modal-drop';\n  static readonly TYPE_MODAL_HALF = 'modal-half';\n\n  @Input() type: string;\n  @Input() placeholder: string;\n  @Input() hint: string;\n  @Input() show = false;\n\n  @Output() close = new EventEmitter();\n  @Output() search = new EventEmitter();\n  @Output() searchInput = new EventEmitter();\n\n  @ViewChild('searchInput') inputElement: ElementRef<HTMLInputElement>;\n\n  @HostBinding('class.show')\n  get showClass() {\n    return this.show;\n  }\n\n  @HostBinding('class.modal-zoomin')\n  get modalZoomin() {\n    return this.type === NbSearchFieldComponent.TYPE_MODAL_ZOOMIN;\n  }\n\n  @HostBinding('class.rotate-layout')\n  get rotateLayout() {\n    return this.type === NbSearchFieldComponent.TYPE_ROTATE_LAYOUT;\n  }\n\n  @HostBinding('class.modal-move')\n  get modalMove() {\n    return this.type === NbSearchFieldComponent.TYPE_MODAL_MOVE;\n  }\n\n  @HostBinding('class.curtain')\n  get curtain() {\n    return this.type === NbSearchFieldComponent.TYPE_CURTAIN;\n  }\n\n  @HostBinding('class.column-curtain')\n  get columnCurtain() {\n    return this.type === NbSearchFieldComponent.TYPE_COLUMN_CURTAIN;\n  }\n\n  @HostBinding('class.modal-drop')\n  get modalDrop() {\n    return this.type === NbSearchFieldComponent.TYPE_MODAL_DROP;\n  }\n\n  @HostBinding('class.modal-half')\n  get modalHalf() {\n    return this.type === NbSearchFieldComponent.TYPE_MODAL_HALF;\n  }\n\n  ngOnChanges({ show }: SimpleChanges) {\n    const becameHidden = !show.isFirstChange() && show.currentValue === false;\n    if (becameHidden && this.inputElement) {\n      this.inputElement.nativeElement.value = '';\n    }\n\n    this.focusInput();\n  }\n\n  ngAfterViewInit() {\n    this.focusInput();\n  }\n\n  emitClose() {\n    this.close.emit();\n  }\n\n  submitSearch(term) {\n    if (term) {\n      this.search.emit(term);\n    }\n  }\n\n  emitSearchInput(term: string) {\n    this.searchInput.emit(term);\n  }\n\n  focusInput() {\n    if (this.show && this.inputElement) {\n      this.inputElement.nativeElement.focus();\n    }\n  }\n}\n\nexport type NbSearchType = 'modal-zoomin' | 'rotate-layout' | 'modal-move' |\n  'curtain' | 'column-curtain' | 'modal-drop' | 'modal-half';\n\n/**\n * Beautiful full-page search control.\n *\n * @stacked-example(Showcase, search/search-showcase.component)\n *\n * Basic setup:\n *\n * ```ts\n *  <nb-search type=\"rotate-layout\"></nb-search>\n * ```\n * ### Installation\n *\n * Import `NbSearchModule` to your feature module.\n * ```ts\n * @NgModule({\n *   imports: [\n *     // ...\n *     NbSearchModule,\n *   ],\n * })\n * export class PageModule { }\n * ```\n * ### Usage\n *\n * Several animation types are available:\n * modal-zoomin, rotate-layout, modal-move, curtain, column-curtain, modal-drop, modal-half\n *\n * It is also possible to handle search event using `NbSearchService`:\n *\n * @stacked-example(Search Event, search/search-event.component)\n *\n * @styles\n *\n * search-background-color:\n * search-divider-color:\n * search-divider-style:\n * search-divider-width:\n * search-extra-background-color:\n * search-text-color:\n * search-text-font-family:\n * search-text-font-size:\n * search-text-font-weight:\n * search-text-line-height:\n * search-placeholder-text-color:\n * search-info-text-color:\n * search-info-text-font-family:\n * search-info-text-font-size:\n * search-info-text-font-weight:\n * search-info-text-line-height:\n */\n@Component({\n  selector: 'nb-search',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  styleUrls: ['styles/search.component.css'],\n  template: `\n    <button #searchButton class=\"start-search\" (click)=\"emitActivate()\" nbButton ghost>\n      <nb-icon icon=\"search-outline\" pack=\"nebular-essentials\"></nb-icon>\n    </button>\n    <nb-search-field\n      *nbPortal\n      [show]=\"showSearchField\"\n      [type]=\"type\"\n      [placeholder]=\"placeholder\"\n      [hint]=\"hint\"\n      (search)=\"search($event)\"\n      (searchInput)=\"emitInput($event)\"\n      (close)=\"emitDeactivate()\">\n    </nb-search-field>\n  `,\n})\nexport class NbSearchComponent implements OnInit, OnDestroy {\n\n  private destroy$ = new Subject<void>();\n  private overlayRef: NbOverlayRef;\n  showSearchField = false;\n\n  /**\n   * Tags a search with some ID, can be later used in the search service\n   * to determine which search component triggered the action, if multiple searches exist on the page.\n   *\n   * @type {string}\n   */\n  @Input() tag: string;\n\n  /**\n   * Search input placeholder\n   * @type {string}\n   */\n  @Input() placeholder: string = 'Search...';\n\n  /**\n   * Hint showing under the input field to improve user experience\n   *\n   * @type {string}\n   */\n  @Input() hint: string = 'Hit enter to search';\n\n  /**\n   * Search design type, available types are\n   * modal-zoomin, rotate-layout, modal-move, curtain, column-curtain, modal-drop, modal-half\n   * @type {string}\n   */\n  @Input() type: NbSearchType;\n\n  @ViewChild(NbPortalDirective) searchFieldPortal: NbPortalDirective;\n  @ViewChild('searchButton', { read: ElementRef }) searchButton: ElementRef<HTMLElement>;\n\n  constructor(\n    private searchService: NbSearchService,\n    private themeService: NbThemeService,\n    private router: Router,\n    private overlayService: NbOverlayService,\n    private changeDetector: ChangeDetectorRef,\n  ) {}\n\n  ngOnInit() {\n    this.router.events\n      .pipe(\n        filter(event => event instanceof NavigationEnd),\n        takeUntil(this.destroy$),\n      )\n      .subscribe(() => this.hideSearch());\n\n    this.searchService.onSearchActivate()\n      .pipe(\n        filter(data => !this.tag || data.tag === this.tag),\n        takeUntil(this.destroy$),\n      )\n      .subscribe(() => this.openSearch());\n\n    this.searchService.onSearchDeactivate()\n      .pipe(\n        filter(data => !this.tag || data.tag === this.tag),\n        takeUntil(this.destroy$),\n      )\n      .subscribe(() => this.hideSearch());\n  }\n\n  ngOnDestroy() {\n    if (this.overlayRef && this.overlayRef.hasAttached()) {\n      this.removeLayoutClasses();\n      this.overlayRef.detach();\n    }\n\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  openSearch() {\n    if (!this.overlayRef) {\n      this.overlayRef = this.overlayService.create();\n      this.overlayRef.attach(this.searchFieldPortal);\n    }\n\n    this.themeService.appendLayoutClass(this.type);\n    observableOf(null).pipe(delay(0)).subscribe(() => {\n      this.themeService.appendLayoutClass('with-search');\n      this.showSearchField = true;\n      this.changeDetector.detectChanges();\n    });\n  }\n\n  hideSearch() {\n    this.removeLayoutClasses();\n    this.showSearchField = false;\n    this.changeDetector.detectChanges();\n    this.searchButton.nativeElement.focus();\n  }\n\n  search(term) {\n    this.searchService.submitSearch(term, this.tag);\n    this.hideSearch();\n  }\n\n  emitInput(term: string) {\n    this.searchService.searchInput(term, this.tag);\n  }\n\n  emitActivate() {\n    this.searchService.activateSearch(this.type, this.tag);\n  }\n\n  emitDeactivate() {\n    this.searchService.deactivateSearch(this.type, this.tag);\n  }\n\n  private removeLayoutClasses() {\n    this.themeService.removeLayoutClass('with-search');\n    observableOf(null).pipe(delay(500)).subscribe(() => {\n      this.themeService.removeLayoutClass(this.type);\n    });\n  }\n}\n"]}